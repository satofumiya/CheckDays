<!-- 目標を管理するところ-->
<div class="container">
  <div class="h-100 bg-white d-flex flex-column align-items-center pb-5">
        <%= form_with model: @goal, class:"mt-5 col-10 " do |f|%>
          <div class="d-flex flex-column justify-content-center">
            <div>
            <div class="d-flex justify-content-between">
              <%= f.label :目標 , class: 'display-6'%>
                <div class="d-flex m-2">
                    <%= f.submit "目標の変更", class:"btn btn-outline-primary"%>
                    <%= link_to '目標を削除する', goal_path(@goal),method: :delete, data: {confirm: "削除しますか？"},class:'btn btn-outline-danger mx-2' %>
                    <% if @goal.reachgoal %>
                        <%= link_to '目標挑戦中に戻す', goal_path(@goal.id, goal: {reachgoal: false}), method: :put, class:"btn btn-outline-primary mx-2" %>
                    <% else %>
                        <%= link_to '目標達成！', goal_path(@goal.id, goal: {reachgoal: true}), method: :put, class:"btn btn-outline-primary ml-2"%>
                    <% end %>
                </div>
            </div>
            <%= f.text_field :text, class: 'form-control form-control-lg'%>
          </div>
            
        <% end %>
        <!-- サブゴールのを管理するところ　-->
      <div class="col-12 border-1 mt-5">
        <div class="d-flex align-items-center col-12 my-2">
          <h1 class="ms-5 col-8"><strong>「<%= @goal.text %>」</strong>  を達成するためのサブゴールの一覧</h1>
          <%= link_to "サブゴールを追加する", new_goal_subgoal_path, class:"btn btn-outline-primary m-3" %>
        </div>
        <% @subgoals.each_with_index do |subgoal,index| %>
          <div class="stream-item">
           <div class="d-flex align-items-center">
              
            <div class="goal-text my-3 col-12">
                <%= form_with model: [@goal,subgoal], class:"" do |sub|%>
                  <div class="d-flex justify-content-center align-items-center">
                    <%= index+1 %>
                    <div class="col-7 mx-4">
                    <%= sub.text_field :title, class: 'form-control'%>
                    </div>
                    <%= sub.submit "更新", class:"btn btn-outline-primary"%>
                    <%= link_to '削除', goal_subgoal_path(@goal, subgoal),method: :delete, data: {confirm: "削除しますか？"},class:'btn btn-outline-danger mx-2' %>
                    <%= link_to  "管理画面へ", edit_goal_subgoal_path(@goal, subgoal), class:"btn btn-outline-primary" %>
                  </div>
                <% end %>
                
            </div>
              
            </div>
          </div>
        <% end %>        
      </div>
  </div>
</div>